
var library = {
    pokemon: [
      'https://res.cloudinary.com/beumsk/image/upload/v1547980025/memory/Pokemon/Bulbasaur.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980083/memory/Pokemon/Charmander.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980101/memory/Pokemon/Squirtle.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980116/memory/Pokemon/Pikachu.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980129/memory/Pokemon/Mewtwo.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980142/memory/Pokemon/Mew.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980154/memory/Pokemon/Articuno.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980164/memory/Pokemon/Zapdos.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980175/memory/Pokemon/Moltres.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980186/memory/Pokemon/Eevee.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980025/memory/Pokemon/Bulbasaur.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980083/memory/Pokemon/Charmander.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980101/memory/Pokemon/Squirtle.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980116/memory/Pokemon/Pikachu.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980129/memory/Pokemon/Mewtwo.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980142/memory/Pokemon/Mew.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980154/memory/Pokemon/Articuno.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980164/memory/Pokemon/Zapdos.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980175/memory/Pokemon/Moltres.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547980186/memory/Pokemon/Eevee.png'
    ],
    genshin: [
      'https://i.pinimg.com/564x/15/1e/ad/151ead2beb0b839fe616f53a23a5cf91.jpg',
      'https://i.pinimg.com/564x/7c/79/65/7c79659a78a3d22932bdcdb7498e9c54.jpg',
      'https://i.pinimg.com/564x/bd/77/47/bd77471c66c7979f9886f135f1fd1d2e.jpg',
      'https://i.pinimg.com/564x/0a/be/c0/0abec06cb20169846c4fa0dd69de39da.jpg',
      'https://i.pinimg.com/564x/fb/06/90/fb06903550c20569f3a5432e25bfa233.jpg',
      'https://i.pinimg.com/564x/5e/ab/3f/5eab3fd99ac270168f69398a8e80d56b.jpg',
      'https://i.pinimg.com/564x/d1/f6/fe/d1f6feb64fdca4c2e7fc9bdf36085e95.jpg',
      'https://i.pinimg.com/564x/6d/3a/40/6d3a4089069b3affdad06033a1ed55f7.jpg',
      'https://i.pinimg.com/564x/81/9a/ce/819ace85f55555a2dd6818b66a4dff05.jpg',
      'https://i.pinimg.com/564x/0c/da/f1/0cdaf15a6d38c2a21dc5e87590758865.jpg',
      'https://i.pinimg.com/564x/15/1e/ad/151ead2beb0b839fe616f53a23a5cf91.jpg',
      'https://i.pinimg.com/564x/7c/79/65/7c79659a78a3d22932bdcdb7498e9c54.jpg',
      'https://i.pinimg.com/564x/bd/77/47/bd77471c66c7979f9886f135f1fd1d2e.jpg',
      'https://i.pinimg.com/564x/0a/be/c0/0abec06cb20169846c4fa0dd69de39da.jpg',
      'https://i.pinimg.com/564x/fb/06/90/fb06903550c20569f3a5432e25bfa233.jpg',
      'https://i.pinimg.com/564x/5e/ab/3f/5eab3fd99ac270168f69398a8e80d56b.jpg',
      'https://i.pinimg.com/564x/d1/f6/fe/d1f6feb64fdca4c2e7fc9bdf36085e95.jpg',
      'https://i.pinimg.com/564x/6d/3a/40/6d3a4089069b3affdad06033a1ed55f7.jpg',
      'https://i.pinimg.com/564x/81/9a/ce/819ace85f55555a2dd6818b66a4dff05.jpg',
      'https://i.pinimg.com/564x/0c/da/f1/0cdaf15a6d38c2a21dc5e87590758865.jpg'
    ],
    lotr: [
      'https://res.cloudinary.com/beumsk/image/upload/v1547981408/memory/lotr/gandalf.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981438/memory/lotr/sauron.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981469/memory/lotr/Aragorn.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981501/memory/lotr/legolas.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981535/memory/lotr/Gimli.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981603/memory/lotr/golum.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981645/memory/lotr/sam.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981686/memory/lotr/saroumane.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981738/memory/lotr/bilbo.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981802/memory/lotr/frodo.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981408/memory/lotr/gandalf.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981438/memory/lotr/sauron.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981469/memory/lotr/Aragorn.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981501/memory/lotr/legolas.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981535/memory/lotr/Gimli.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981603/memory/lotr/golum.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981645/memory/lotr/sam.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981686/memory/lotr/saroumane.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981738/memory/lotr/bilbo.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547981802/memory/lotr/frodo.jpg'
    ],
    disney: [
      'https://res.cloudinary.com/beumsk/image/upload/v1547982044/memory/disney/mickey.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982088/memory/disney/mowgli.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982610/memory/disney/tarzan.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982620/memory/disney/simba.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982628/memory/disney/aladin.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982636/memory/disney/blanche%20neige.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982644/memory/disney/alice.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982653/memory/disney/peter%20pan.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982663/memory/disney/pinocchio.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982738/memory/disney/raiponce.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982044/memory/disney/mickey.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982088/memory/disney/mowgli.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982610/memory/disney/tarzan.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982620/memory/disney/simba.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982628/memory/disney/aladin.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982636/memory/disney/blanche%20neige.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982644/memory/disney/alice.png',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982653/memory/disney/peter%20pan.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982663/memory/disney/pinocchio.jpg',
      'https://res.cloudinary.com/beumsk/image/upload/v1547982738/memory/disney/raiponce.jpg'
    ],
  }
  
  var images = [];
  var tempElt1 = "";
  var tempElt2 = "";
  var click = -1;
  var win = 0;
  var score = 0;
  var time = 0;
  
  var preElt = document.querySelector("#pre");
  var themesElt = document.querySelector("#themes");
  var boxElts = document.getElementsByClassName("box");
  var mainElt = document.querySelector(".main");
  var timeElt = document.querySelector("#time");
  var scoreElt = document.querySelector("#score");
  var postElt = document.querySelector("#post");
  var finalElt = document.querySelector("#final");
  var againElt = document.querySelector("#again");
  
  
  themesElt.addEventListener("click", function(e) {
    if (e.target.classList.contains("themes")) {
      activateTheme(e.target.id);
      preElt.classList.add("hidden");
    }
  });
  
  
  function activateTheme(theme) {
    for (let i = 0; i < 20; i++) {images.push(library[theme][i]);}  
    for (let i = 0; i < 20; i++) {
      var rand = Math.floor(Math.random() * (images.length - 1));
      boxElts[i].innerHTML = "<img src='" + images[rand] + "' alt='image' class='hidden'>";
      images.splice(rand, 1);
    }
  }
  
  
  mainElt.addEventListener("click", gameLogic);
  
  function gameLogic(e) {
    if (e.target.classList.contains("play")) {
      e.target.firstChild.classList.remove("hidden");
      if (click < 1) {
        tempElt1 = e.target;
        if (click === -1) {
          timer = setInterval(function() {
            time++;
            timeElt.innerHTML = time;
          }, 1000);
        }
        click = 1;
      }
  

      else if (e.target !== tempElt1) {
        tempElt2 = e.target;
  
        if (tempElt1.firstChild.src !== tempElt2.firstChild.src) {
          mainElt.removeEventListener("click", gameLogic);
          setTimeout( function() {
            tempElt1.firstChild.classList.add("hidden");
            tempElt2.firstChild.classList.add("hidden");
            mainElt.addEventListener("click", gameLogic);
          }, 400);
          if (score > 0) {
            score -= 2;
          }
          scoreElt.innerHTML = score;
        }
  

        else {
          score += 10;
          win += 2;
          tempElt1.firstChild.classList.add("outlined");
          tempElt2.firstChild.classList.add("outlined");
          tempElt1.classList.remove("play");
          tempElt2.classList.remove("play");
          scoreElt.innerHTML = score;
  
          // game won
          if (win === 20) {
            clearInterval(timer);
            finalElt.innerHTML = "Tu Ã  gagner " + score + " points <br> en " + time + " seconds";
            postElt.classList.remove("hidden");
          }
        }
        click = 0;
      }
    }
  }
  
  againElt.addEventListener("click", resetGame);
  
  function resetGame() {
    // reset game
    tempElt1 = "";
    tempElt2 = "";
    click = -1;
    win = 0;
    score = 0;
    time = 0;
    postElt.classList.add("hidden");
    preElt.classList.remove("hidden");
    for (let i = 0; i < 20; i++) {
      boxElts[i].classList.add("play");
      boxElts[i].firstChild.classList.add("hidden");
    }
    timeElt.textContent = time;
    scoreElt.textContent = score;
  }

  reset();